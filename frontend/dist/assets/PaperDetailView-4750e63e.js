import{i as v,j as c,k as _,l as k,m as y,n as b,p as P,u as B,q as D,_ as w,o,c as s,a,t as i,h as g,F as L,e as C,f as m}from"./index-1152591e.js";const F=v({name:"PaperDetailView",setup(){const e=B(),r=D(),l=c(null),d=c(!0),p=c(null),u=c(null),t=_(()=>{if(!l.value)return"";try{return new Date(l.value.published_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return l.value.published_date}}),h=()=>{if(document.referrer.includes(window.location.host)){const n=new URL(document.referrer).pathname;sessionStorage.setItem(`scrollPos-${n}`,"0")}r.go(-1)};return k(async()=>{const n=e.params.id;if(!n){p.value="Paper ID is required",d.value=!1;return}try{l.value=await y(n);try{u.value=await b(n)}catch(f){console.error("Failed to get optimized PDF URL:",f),u.value=null}}catch(f){p.value="Failed to load paper details. The paper may not exist.",console.error("Error loading paper:",f)}finally{d.value=!1}}),{paper:l,isLoading:d,error:p,formattedDate:t,getCategoryLabel:P,optimizedPdfUrl:u,goBack:h}}});const U={class:"paper-detail"},V={key:0,class:"loading"},E={key:1,class:"error"},I={key:2,class:"paper-container"},$={class:"paper-header"},z={class:"paper-title"},R={class:"paper-meta"},S={class:"authors"},N={class:"date"},j={class:"paper-categories"},q={class:"paper-actions"},A=["href"],T=["href"],M={class:"paper-abstract"};function G(e,r,l,d,p,u){return o(),s("div",U,[e.isLoading?(o(),s("div",V," Loading paper details... ")):e.error?(o(),s("div",E,[a("p",null,i(e.error),1),a("button",{onClick:r[0]||(r[0]=(...t)=>e.goBack&&e.goBack(...t)),class:"back-link"},"Back")])):e.paper?(o(),s("div",I,[a("div",$,[a("h1",z,i(e.paper.title),1),a("div",R,[a("div",S,[r[2]||(r[2]=a("strong",null,"Authors:",-1)),g(" "+i(e.paper.authors.join(", ")),1)]),a("div",N,[r[3]||(r[3]=a("strong",null,"Published:",-1)),g(" "+i(e.formattedDate),1)])]),a("div",j,[r[4]||(r[4]=a("strong",null,"Categories:",-1)),(o(!0),s(L,null,C(e.paper.categories,t=>(o(),s("span",{key:t,class:"category-tag"},i(e.getCategoryLabel(t)),1))),128))])]),a("div",q,[e.optimizedPdfUrl?(o(),s("a",{key:0,href:e.optimizedPdfUrl,target:"_blank",rel:"noopener noreferrer",class:"action-button primary"}," 查看PDF ",8,A)):e.paper.pdf_url?(o(),s("a",{key:1,href:e.paper.pdf_url,target:"_blank",rel:"noopener noreferrer",class:"action-button primary"}," 查看PDF ",8,T)):m("",!0),a("button",{onClick:r[1]||(r[1]=(...t)=>e.goBack&&e.goBack(...t)),class:"action-button"}," Back ")]),a("div",M,[r[5]||(r[5]=a("h2",null,"Abstract",-1)),a("p",null,i(e.paper.abstract),1)])])):m("",!0)])}const J=w(F,[["render",G],["__scopeId","data-v-d30e72fd"]]);export{J as default};
