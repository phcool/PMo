import{_ as P,d as B,c as t,a as p,b as e,t as o,n as C,e as m,F as D,r as _,f as d,g as z,o as L,u as V,h as g,i as A,j as E,k as r}from"./index-CGiBp5pr.js";const F=B({name:"PaperDetailView",setup(){const s=V(),a=E(),i=d(null),u=d(!0),y=d(null),c=d(!1),n=d(!1),f=d(null),k=z(()=>{if(!i.value)return"";try{return new Date(i.value.published_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return i.value.published_date}}),h=()=>{c.value=!c.value},b=()=>{if(document.referrer.includes(window.location.host)){const l=new URL(document.referrer).pathname;sessionStorage.setItem(`scrollPos-${l}`,"0")}a.go(-1)},w=async()=>{if(!(!i.value||n.value))try{n.value=!0,await g.analyzePaper(i.value.paper_id),i.value=await g.getPaperById(i.value.paper_id)}catch(l){console.error("Error analyzing paper:",l),f.value="An error occurred while analyzing the paper. Please try again later."}finally{n.value=!1}};return L(async()=>{const l=s.params.id;if(!l){y.value="Paper ID is required",u.value=!1;return}try{i.value=await g.getPaperById(l);try{await g.recordPaperView(l)}catch(v){console.error("Error recording paper view:",v)}}catch(v){console.error("Error fetching paper details:",v),y.value="Failed to fetch paper details. Please try again later."}finally{u.value=!1}}),{paper:i,isLoading:u,error:y,formattedDate:k,getCategoryLabel:A,showPdf:c,togglePdfViewer:h,goBack:b,analyzePaper:w,isAnalyzing:n,analysisError:f}}}),I={class:"paper-detail"},$={key:0,class:"loading"},S={key:1,class:"error"},R={class:"paper-content"},N={class:"paper-header"},T={class:"paper-title"},j={class:"paper-meta"},H={class:"authors"},M={class:"date"},U={class:"paper-categories"},q={class:"paper-actions"},K={class:"paper-abstract"},W={key:0,class:"paper-analysis"},G={key:0,class:"analysis-section"},J={class:"analysis-text"},O={key:1,class:"analysis-section"},Q={class:"analysis-text"},X={key:2,class:"analysis-section"},Y={class:"analysis-text"},Z={key:3,class:"analysis-section"},x={class:"analysis-text"},ss={key:4,class:"analysis-section"},es={class:"analysis-text"},as={key:5,class:"analysis-section"},ts={class:"analysis-text"},rs={key:1,class:"paper-analysis-control"},ns={key:0,class:"analyzing"},os={key:1},is={key:2,class:"analysis-error"},ls={key:0,class:"pdf-section"},ps=["src"];function ds(s,a,i,u,y,c){return r(),t("div",I,[s.isLoading?(r(),t("div",$," Loading paper details... ")):s.error?(r(),t("div",S,[e("p",null,o(s.error),1),e("button",{onClick:a[0]||(a[0]=(...n)=>s.goBack&&s.goBack(...n)),class:"back-link"},"Back")])):s.paper?(r(),t("div",{key:2,class:C(["paper-container",{"split-layout":s.showPdf}])},[e("div",R,[e("div",N,[e("h1",T,o(s.paper.title),1),e("div",j,[e("div",H,[a[4]||(a[4]=e("strong",null,"Authors:",-1)),m(" "+o(s.paper.authors.join(", ")),1)]),e("div",M,[a[5]||(a[5]=e("strong",null,"Published:",-1)),m(" "+o(s.formattedDate),1)])]),e("div",U,[a[6]||(a[6]=e("strong",null,"Categories:",-1)),(r(!0),t(D,null,_(s.paper.categories,n=>(r(),t("span",{key:n,class:"category-tag"},o(s.getCategoryLabel(n)),1))),128))])]),e("div",q,[e("button",{onClick:a[1]||(a[1]=(...n)=>s.togglePdfViewer&&s.togglePdfViewer(...n)),class:"action-button primary"},o(s.showPdf?"Hide PDF":"PDF"),1),e("button",{onClick:a[2]||(a[2]=(...n)=>s.goBack&&s.goBack(...n)),class:"action-button"}," Back ")]),e("div",K,[a[7]||(a[7]=e("h2",null,"Abstract",-1)),e("p",null,o(s.paper.abstract),1)]),s.paper.analysis?(r(),t("div",W,[a[14]||(a[14]=e("h2",null,"AI Analysis Results",-1)),s.paper.analysis.summary?(r(),t("div",G,[a[8]||(a[8]=e("h3",null,"Summary",-1)),e("p",J,o(s.paper.analysis.summary),1)])):p("",!0),s.paper.analysis.key_findings?(r(),t("div",O,[a[9]||(a[9]=e("h3",null,"Key Findings",-1)),e("p",Q,o(s.paper.analysis.key_findings),1)])):p("",!0),s.paper.analysis.contributions?(r(),t("div",X,[a[10]||(a[10]=e("h3",null,"Contributions",-1)),e("p",Y,o(s.paper.analysis.contributions),1)])):p("",!0),s.paper.analysis.methodology?(r(),t("div",Z,[a[11]||(a[11]=e("h3",null,"Methodology",-1)),e("p",x,o(s.paper.analysis.methodology),1)])):p("",!0),s.paper.analysis.limitations?(r(),t("div",ss,[a[12]||(a[12]=e("h3",null,"Limitations",-1)),e("p",es,o(s.paper.analysis.limitations),1)])):p("",!0),s.paper.analysis.future_work?(r(),t("div",as,[a[13]||(a[13]=e("h3",null,"Future Work",-1)),e("p",ts,o(s.paper.analysis.future_work),1)])):p("",!0)])):(r(),t("div",rs,[s.isAnalyzing?(r(),t("div",ns,a[15]||(a[15]=[e("p",null,"Analyzing paper... This may take several minutes. Please be patient.",-1),e("div",{class:"progress-spinner"},null,-1)]))):(r(),t("div",os,a[16]||(a[16]=[e("p",{class:"no-analysis-message"},"This paper has not been analyzed yet.",-1)]))),s.analysisError?(r(),t("div",is,[e("p",null,o(s.analysisError),1),e("button",{onClick:a[3]||(a[3]=n=>s.analysisError=null),class:"action-button"},"Dismiss")])):p("",!0)]))]),s.showPdf&&s.paper.pdf_url?(r(),t("div",ls,[e("iframe",{src:s.paper.pdf_url+"#toolbar=1&navpanes=1&scrollbar=1&view=FitH",class:"pdf-iframe",frameborder:"0",allowfullscreen:""},null,8,ps)])):p("",!0)],2)):p("",!0)])}const ys=P(F,[["render",ds],["__scopeId","data-v-a48d10af"]]);export{ys as default};
